import pytest

from generatecfxhistory import role, release_role_mapping

# fmt: off

champfx_fixed_implemented_in_data = ["S003_Component TCR3 CBTC_SFE_PAS -",
    "S001_System TCR3 CBTC -",
    "S001_System Système NExTEO ATC V1A",
    "S001_System Système NExTEO -",
    "S002_Subsystem TCR3 CBTC_PAE RL3E6a",
    "S001_System Système NExTEO ATC V2-A.1",
    "S003_Component PAE -",
    "S003_Component TCR3 CBTC_SFE_PAE -",
    "S004_Module Eurobalise de Localisation -",
    "S002_Subsystem Automatic Train Control -",
    "S002_Subsystem CDB V3 -",
    "S003_Component API COEUR CK V2.0.0",
    "S004_Module Tiroir Calculateur équipé -",
    "S002_Subsystem Matériels complémentaires -",
    "S001_System ATSP <0.5",
    "S002_Subsystem Interfaces_NEXTEO -",
    "S001_System ATSP V0.6",
    "S001_System ATSP V0.5",
    "S001_System Management du Projet -",
    "S002_Subsystem Radio Sol -",
    "S002_Subsystem Outils de Développement -",
    "S003_Component PAE RL2b.6.2",
    "S002_Subsystem COEUR CK V1.2.0",
    "S002_Subsystem Outils de Maintenance -",
    "S003_Component Plateforme Essai Bord -",
    "S002_Subsystem Essais Usine -",
    "S001_System Système NExTEO ATC V2-A.2",
    "S003_Component PAS_NEXTEO -",
    "S003_Component Système de Transition par balises -",
    "S003_Component Odotachymètre double -",
    "S003_Component PAE RL2b.1",
    "S003_Component PAE RL2b.6.1",
    "S002_Subsystem Performances du Système -",
    "S003_Component PAE RL2a.3",
    "S004_Module Application PAS Sécuritaire (PAGS_AS) -",
    "S004_Module Logiciel de Service (Calculateur de Base) -",
    "S003_Component PAE RL2b.6.4",
    "S004_Module EVC/DMI/JRU -",
    "S003_Component PAE RL2b.3",
    "S003_Component PAE RL2a.2",
    "S001_System Système NExTEO ATC V2-B.2 / ATS V1.1.5+V1.1.6",
    "S003_Component MOTEUR TERRAIN COEUR CK V2.0.0",
    "S002_Subsystem COEUR CK V3.1",
    "S002_Subsystem SIMEV SIFOR V0.7",
    "S001_System ATSP V0.8",
    "S003_Component MOTEUR TERRAIN COEUR CK V2.0.0 beta",
    "S002_Subsystem COEUR CK V2.1.0",
    "S001_System ATSP V1.0",
    "S003_Component MOTEUR TERRAIN COEUR CK V2.1.0",
    "S001_System ATSP V0.7.1",
    "S002_Subsystem COEUR CK V2.0.0",
    "S002_Subsystem COEUR CK V1.2.1.1",
    "S002_Subsystem COEUR CK V2.0.0 beta",
    "S002_Subsystem COEUR CK V3.0",
    "S003_Component Plateforme Essai Système -",
    "S001_System ATSP V0.10",
    "S001_System ATSP V0.7",
    "S002_Subsystem SIMEV SIFOR V0.6",
    "S002_Subsystem COEUR CK V2.1.1",
    "S001_System ATSP Charlie A_1.0",
    "S001_System ATSP V0.11.5 P1",
    "S003_Component API COEUR CK V2.1.0",
    "S002_Subsystem COEUR CK V3.0.1",
    "S004_Module Application PAS Fonctionnelle (PAGS_AF) -",
    "S001_System ATSP V0.9",
    "S003_Component Outils d'Intégration / Qualification -",
    "S002_Subsystem COEUR CK V2.2.0",
    "S003_Component MOTEUR TERRAIN COEUR CK V2.2.0",
    "S001_System Système NExTEO ATC V2-B.4 / ATS V1.2",
    "S002_Subsystem SIMEV SIFOR V0.9",
    "S001_System ATSP V1.1",
    "S003_Component Passerelle Profibus -",
    "S002_Subsystem TCR3 CBTC_SIMECH -",
    "S001_System ATSP V0.11.2 P1",
    "S002_Subsystem SIMEV SIFOR V0.8",
    "S003_Component MOTEUR TERRAIN COEUR CK V2.1.1",
    "S002_Subsystem COEUR CK V3.0.3",
    "S002_Subsystem COEUR CK V2.2.1",
    "S002_Subsystem SIMEV SIFOR V0.10",
    "S001_System ATSP V0.8.1",
    "S001_System ATSP V0.10.4",
    "S003_Component PAE RL2b.2",
    "S001_System ATSP V0.10.2",
    "S001_System Système NExTEO ATC V2-B.1",
    "S002_Subsystem Réseau Sol ATC -",
    "S001_System ATSP V0.11",
    "S002_Subsystem SIMEV SIFOR V0.7.1",
    "S002_Subsystem XT_OT_IMM -",
    "S002_Subsystem Outils de Test Client -",
    "S001_System ATS TUBE V0.8.2",
    "S003_Component MOTEUR TERRAIN COEUR CK V3.0",
    "S003_Component PAE RL2b.5",
    "S002_Subsystem Automatic Train Supervision -",
    "S001_System Système NExTEO NEXT_EOLE_V04",
    "S003_Component PAE RL2b.4",
    "S003_Component Commutateur et pare-feux -",
    "S003_Component API FGPT V1.0.0",
    "S002_Subsystem FGPT V1.0.0",
    "S001_System ATSP Golf A2_4.0",
    "S002_Subsystem COEUR CK V3.2.1",
    "S002_Subsystem COEUR CK V2.2.4",
    "S003_Component MOTEUR TERRAIN COEUR CK V3.1.2",
    "S003_Component Atelier de Paramétrage, création, adapt., valid. -",
    "S001_System ATSP V1.2",
    "S001_System Système NExTEO ATC V2-B.3 / ATS V1.1.7",
    "S001_System ATSP V0.11.5",
    "S001_System ATS TUBE V0.8.1",
    "S003_Component MOTEUR TERRAIN COEUR CK V3.1.3",
    "S003_Component PAE RL2b.4+",
    "S002_Subsystem Automatic Train Control RL2B6",
    "S001_System Système NExTEO NEXT_EOLE_V03",
    "S003_Component Interfaces ATS -",
    "S003_Component Master V2.0d",
    "S003_Component SOUCHE COEUR CK V2.0.3",
    "S003_Component SOUCHE COEUR CK V2.0.0+",
    "I005_Tools/Simulation SIFOR CCU PANTIN (SNCF) V0.11",
    "I005_Tools/Simulation SIMEV2 TCM V0.10",
    "I005_Tools/Simulation SIMEV1 PLATEFORME HOMOLOGATION V0.10 P2",
    "S003_Component MOTEUR TERRAIN COEUR CK V3.1.1",
    "S002_Subsystem COEUR CK TUBE V3.0.1",
    "S002_Subsystem COEUR CK TUBE V3.0.0",
    "S002_Subsystem Automatic Train Supervision ATS Golf A",
    "I005_Tools/Simulation SIMEV2 TCM V0.8",
    "S002_Subsystem COEUR CK V3.1.1",
    "I005_Tools/Simulation SIFOR CCU PANTIN (SNCF) V0.8",
    "S001_System ATSP Delta A_2.0",
    "S003_Component API COEUR CK V3.0.3",
    "S002_Subsystem COEUR CK V5.2",
    "S003_Component MOTEUR TERRAIN COEUR CK V2.2.1",
    "S003_Component API COEUR CK V2.1.1",
    "S001_System ATS TUBE V0.9.1",
    "S003_Component Master V5.0",
    "S002_Subsystem SIMEV SIFOR V0.11.5 P1",
    "S003_Component SOUCHE COEUR CK V2.0.4 P1",
    "S002_Subsystem COEUR CK V3.3",
    "S002_Subsystem SIMECH NEXT_SIMECH_LEGACY_V0_108",
    "S002_Subsystem Essais Site -",
    "S002_Subsystem COEUR CK TUBE V3.0.4",
    "S002_Subsystem COEUR CK TUBE V3.0.2",
    "S002_Subsystem COEUR CK V2.1.1.4",
    "S001_System ATSP Echo A_2.0",
    "S002_Subsystem SIMEV SIFOR V0.8.2",
    "S002_Subsystem COEUR CK TUBE V3.0.3",
    "S002_Subsystem COEUR CK V2.2.2",
    "S001_System ATSP V0.11.1",
    "S002_Subsystem COEUR CK V3.0 Prime1",
    "S003_Component PAS_NEXTEO RL2b.5",
    "S004_Module Application PAL Sécuritaire (PANS_AS) -",
    "S002_Subsystem Automatic Train Control RL2B6.3",
    "S004_Module Eurobalise de Transition -",
    "S003_Component PAE RL2b.2 P1",
    "S002_Subsystem COEUR CK V2.2.3",
    "S001_System ATSP Delta B_2.0",
    "S001_System ATSP V0.11.3",
    "S001_System ATSP V0.10 P2",
    "S003_Component Master V3.0",
    "S003_Component MOTEUR TERRAIN COEUR CK V3.0.1",
    "S001_System Système NExTEO ATC V2-B.5 / ATS V1.2",
    "S003_Component SOUCHE COEUR CK V2.0.4",
    "S002_Subsystem SIMEV SIFOR V0.11.5",
    "S003_Component MOTEUR TERRAIN COEUR CK V3.1.0",
    "S001_System Système NExTEO NEXT_EOLE_V01-05",
    "S002_Subsystem COEUR CK V3.2",
    "S003_Component PAS_NEXTEO RL2b.1",
    "S003_Component PAE RL2b.7.x (rebond)",
    "S002_Subsystem ADONEM V2.0",
    "S003_Component PAS_NEXTEO RL2b.6.3",
    "S003_Component MOTEUR TERRAIN COEUR CK V3.2.1",
    "S002_Subsystem COEUR CK V5.0",
    "S002_Subsystem Radio Bord -",
    "S003_Component PAE RL2b.2 P2",
    "S002_Subsystem COEUR CK V3.0.4",
    "S003_Component PAE RL2b.3 P1",
    "S002_Subsystem COEUR CK V3.1.2",
    "S003_Component SOUCHE COEUR CK V2.0.5",
    "S001_System ATSP V0.11.4",
    "S001_System ATS TUBE V0.10",
    "S003_Component SOUCHE COEUR CK V2.0.4 P2",
    "S001_System ATSP Golf A1_4.0",
    "S003_Component PAE RL2b.6.5",
    "S002_Subsystem SIMEV SIFOR V0.10 P2",
    "S002_Subsystem SIMEV SIFOR V0.10.3",
    "S003_Component MOTEUR TERRAIN COEUR CK V3.3",
    "I005_Tools/Simulation SIFOR CCU PANTIN (SNCF) V0.9",
    "S003_Component Baie Centrale Radio -",
    "S001_System ATS TUBE V0.10.1",
    "S003_Component MOTEUR TERRAIN COEUR CK V3.2.0",
    "S002_Subsystem SIMECH NEXT_SIMECH_LEGACY_V0_97",
    "S002_Subsystem ADONEM V1.0",
    "S002_Subsystem COEUR CK V3.1.3",
    "S001_System ATSP Echo C1_2.2",
    "S002_Subsystem COEUR CK V3.0.6",
    "S001_System ATSP V0.11.2",
    "S001_System ATSP V0.11.5 P2",
    "S003_Component MDT V2.0a",
    "S003_Component MES -",
    "S003_Component Interfaces Signalisation -",
    "S001_System ATSP Foxtrot B1_3.0",
    "S001_System ATSP Echo C2_2.3",
    "S001_System ATSP Foxtrot A_3.0",
    "S001_System ATSP V0.10.2 P1",
    "S001_System ATSP Golf A3_4.1",
    "S003_Component API COEUR CK V3.1.2",
    "S003_Component Afficheur compte à rebours -",
    "S002_Subsystem SIMEV SIFOR Echo C2_2.3",
    "S002_Subsystem COEUR CK V3.1.5",
    "S002_Subsystem Fiabilité, Disponibilité, Maintenabilité, Sécurité -",
    "S001_System Système NExTEO ATC V3-A.1 / ATS V1.2",
    "S001_System ATSP V0.11_P1",
    "S002_Subsystem SIMEV SIFOR V0.11",
    "S002_Subsystem SIMEV SIFOR V0.11.1",
    "S002_Subsystem SIMEV SIFOR V0.11.2",
    "S003_Component SOUCHE COEUR CK V2.0.5 P4",
    "S002_Subsystem Réseau Bord -",
    "S002_Subsystem SIMEV SIFOR V0.11.3",
    "S004_Module CDB pour Eurobalise RL2aS",
    "S002_Subsystem SIMEV SIFOR Delta B_2.0",
    "S002_Subsystem ADONEM V2.1 P2",
    "S002_Subsystem COEUR CK V3.1.3.1",
    "S003_Component SBL Sol -",
    "S003_Component Master V2.0f",
    "S001_System MES SIL2 V3.2",
    "S002_Subsystem COEUR CK V5.2.1",
    "S002_Subsystem SIMEV SIFOR Charlie B_1.0",
    "S003_Component Master V4.0",
    "S002_Subsystem SIMEV SIFOR Delta A_2.0",
    "S002_Subsystem COEUR CK V3.2.1.2",
    "S003_Component PAS_NEXTEO RL2b.4",
    "S003_Component MOTEUR TERRAIN COEUR CK V3.2.3",
    "S002_Subsystem ADONEM V2.1 P1",
    "S002_Subsystem ADONEM V2.1",
    "S001_System ATSP V0.11.2 P2",
    "S002_Subsystem SIMEV SIFOR Charlie A_1.0",
    "S001_System ATSP Echo A2_2.0",
    "S002_Subsystem Invariants -",
    "S001_System ATSP V0.11.2 P3",
    "S002_Subsystem COEUR CK V3.2.2",
    "S001_System ATSP Echo C_2.1",
    "S001_System ATSP Foxtrot B_3.0",
    "S001_System ATSP Golf B1_4.3",
    "S001_System ATSP Delta C_2.0",
    "S003_Component SOUCHE COEUR CK V2.0.5 P2",
    "S002_Subsystem COEUR CK V3.2.3",
    "S003_Component SOUCHE COEUR CK V2.0.5 P1",
    "S002_Subsystem SIMEV SIFOR Echo C1_2.2",
    "S003_Component SOUCHE COEUR CK V2.1",
    "S003_Component SOUCHE COEUR CK V2.0.5 P3",
    "S001_System ATSP V0.11.2 P4",
    "S002_Subsystem ADONEM V4.0",
    "S002_Subsystem SIMEV SIFOR Golf A_4.0",
    "S002_Subsystem Radio Sol R-8-4-1",
    "S002_Subsystem SIMEV SIFOR V0.11.5 P2",
    "S002_Subsystem COEUR CK V3.1.6",
    "S002_Subsystem Réseau Sol ATS -",
    "S003_Component Master V6.0",
    "S003_Component Antenne Radio -",
    "S002_Subsystem COEUR CK V3.3.3",
    "S003_Component Master V6.1",
    "S002_Subsystem SIMEV SIFOR Echo A_2.0",
    "S003_Component PAE RL2b.4 P1",
    "S003_Component MOTEUR TERRAIN COEUR CK V5.0",
    "S003_Component PAE RL2b.4 P2",
    "S002_Subsystem Radio Sol R-8-4-0 + patch nov 2023",
    "S001_System ATSP Echo A1_2.0",
    "S002_Subsystem COEUR CK V3.3.1",
    "S002_Subsystem Invariants NEXT_INV_V4_15",
    "S002_Subsystem Invariants NEXT_INV_V4_16",
    "S002_Subsystem Invariants NEXT_INV_V4_18",
    "S002_Subsystem COEUR CK V3.3.2",
    "S002_Subsystem Invariants NEXT_INV_V4_19",
    "S002_Subsystem Radio Bord R8.4.1",
    "S002_Subsystem COEUR CK V3.3.2.1",
    "S001_System ATSP V2.0",
    "S001_System Système NExTEO NEXT_EOLE_V02-01",
    "S003_Component SOUCHE COEUR CK V2.0.5 P5",
    "S002_Subsystem Invariants NEXT_INV_V4_17",
    "S002_Subsystem COEUR CK V5.0.1",
    "S001_System ATSP Echo B_2.0",
    "S003_Component MOTEUR TERRAIN COEUR CK V5.2.1",
    "S002_Subsystem SIMEV SIFOR Golf B1_4.3",
    "S001_System ATSP Delta B_2.1",
    "S002_Subsystem COEUR CK V3.3.3.1",
    "S002_Subsystem SIMECH NEXT_SIMECH_LEGACY_V0_115",
    "S003_Component Point d'Accès Réseau -",
    "S002_Subsystem COEUR CK V3.3.4",
    "S003_Component Interfaces Voie -",
    "S002_Subsystem SIMECH NEXT_SIMECH_LEGACY_V0_118",
    "S003_Component PAE RL2B.7.1 Cyber",
    "S002_Subsystem Invariants NEXT_INV_V5_01",
    "S002_Subsystem Gumps V1.3.4 Denali",
    "S003_Component PAS_NEXTEO RL2b.7",
    "S003_Component PAS_NEXTEO RL2b.7 1er Sprint",
    "S002_Subsystem COEUR CK V5.3.1",
    "S002_Subsystem ADONEM V2.2.6",
    "S003_Component Master V6.0P2",
    "S002_Subsystem SIMEV SIFOR Echo B_2.0",
    "S002_Subsystem Invariants NEXT_INV_PLTF_V2_03 (RL2B6)",
    "S003_Component Package AD V1",
    "S002_Subsystem SIMEV SIFOR Echo A2_2.0",
    "S002_Subsystem ADONEM -",
    "S002_Subsystem Gumps V1.2.4 sous Cyclos V1.2.2 - COVASEC Echo C juil24",
    "S001_System ATSP NExT_Golf B_4.0",
    "S002_Subsystem Invariants NEXT_INV_V5_05",
    "S002_Subsystem SIMEV SIFOR Echo C_2.0",
    "S003_Component SOUCHE COEUR CK V2.1.0-P1",
    "S003_Component SOUCHE COEUR CK V2.1.1",
    "S003_Component Package AD V0.5P3",
    "S003_Component PAE RL2b.7.1",
    "S002_Subsystem SIMEV SIFOR Foxtrot B_3.0",
    "S002_Subsystem COEUR CK V5.0.2",
    "S002_Subsystem Invariants NEXT_INV_V5_03",
    "S002_Subsystem Invariants NEXT_INV_V5_04",
    "S002_Subsystem ADONEM V4.0 (COVASEC janvier 25)",
    "S004_Module MdT -",
    "S001_System ATSP V1.3",
    "S003_Component Master V7.0",
    "S003_Component PAE RL2b.6.3",
    "S002_Subsystem Radio Sol R-8-4-1 patch",
    "S001_System ATSP Echo C3_2.3",
    "S002_Subsystem ADONEM V3.2.01 (ADONEM)",
    "S001_System Système NExTEO NEXT_EOLE_V01-04",
    "S001_System ATSP NExT_Golf A2_4.0",
    "S002_Subsystem Invariants NEXT_INV_V5_02",
    "S002_Subsystem ADONEM V2.2.x COVASEC Echo févr 2024 & audit PASSI 2024",
    "S002_Subsystem ADONEM V2.3",
    "S002_Subsystem ADONEM V3.1",
    "S002_Subsystem Automatic Train Supervision ATS Echo C",
    "S004_Module Master v6.0",
    "S002_Subsystem Gumps V1.3.5 Denali+ (reprise ITF ATS téléchargement)",
    "S004_Module Master v7",
    "S001_System ATSP NExT_Foxtrot B_3.0",
    "S001_System ATSP Golf C_4.4",
    "S004_Module Package AD v0.5P3",
    "S004_Module Package AD v1.1",
    "S004_Module Package AD v1",
    "S002_Subsystem Radio Sol R-8-4-0 (début 2023)",
    "S001_System ATSP Golf A2b_4.1",
    "S004_Module Fichiers BdD Invariants PAS -",
    "S001_System ATSP NExT_Foxtrot A_3.0",
    "S002_Subsystem Automatic Train Supervision ATS Golf B",
    "S002_Subsystem SIMEV SIFOR Foxtrot C_2.0",
    "S001_System ATSP NExT_Golf A_4.0",
    "S002_Subsystem COEUR CK V5.2.2",
    "S003_Component PAE RL2b.6.3 P2 (CUCP V9_6_P2)",
    "S002_Subsystem Invariants NEXT_INV_V6_00_P1",
    "S002_Subsystem COEUR CK V5.2.3",
    "S002_Subsystem COEUR CK V5.2.4",
    "S002_Subsystem COEUR CK V5.2.7",
    "S002_Subsystem COEUR CK V5.2.6",
    "S002_Subsystem SIMEV SIFOR Golf A2_4.0",
    "S002_Subsystem SIMEV SIFOR Golf A2b_4.1",
    "S002_Subsystem COEUR CK V5.2.8",
    "S001_System ATSP Golf B0_4.1",
    "S002_Subsystem Invariants NEXT_INV_V5_05_P1",
    "S002_Subsystem Invariants NEXT_INV_V6_01",
    "S003_Component CYCLOS Configuration for ATC -",
    "S002_Subsystem SIMEV SIFOR Golf A3_4.2",
    "S002_Subsystem Paramètres bord NEXT_PAE_PARAM_LR_SHADOW_V7_00",
    "S002_Subsystem Invariants NEXT_INV_V5_06",
    "S002_Subsystem Invariants NEXT_INV_V6_00",
    "S002_Subsystem Paramètres bord NEXT_PAE_PARAM_LR_V8_00",
    "S003_Component Package AD V1.1",
    "S003_Component Master V7.P1",
    "S001_System ATSP NExT_Golf B2_4.4",
    "S002_Subsystem SIMEV SIFOR NExT_Golf B2_4.2"]
# fmt: off


class TestUserLibrary:
    def test_input_files(self)->None:
        cfx_users_library: role.CfxUserLibrary = role.CfxUserLibrary( user_and_role_data_text_file_full_path="Input/role_data_next_ats.txt",   release_subsystem_mapping=release_role_mapping.next_atsp_release_subsystem_mapping)
        assert cfx_users_library


class TestFixedImplementedInToSubsystemConversion:
    @pytest.mark.parametrize("champfx_fixed_implemented_in", champfx_fixed_implemented_in_data)
    def test_all_champfx_fixed_implemented_can_be_converted(self, champfx_fixed_implemented_in: str) -> None:
        cfx_users_library: role.CfxUserLibrary = role.CfxUserLibrary( user_and_role_data_text_file_full_path="Input/role_data_next_ats.txt",   release_subsystem_mapping=release_role_mapping.next_atsp_release_subsystem_mapping)
        assert cfx_users_library.get_subsystem_from_champfx_fixed_implemented_in(champfx_fixed_implemented_in)



class TestRoleConversion:
    def test_random(self) -> None:
        cfx_users_library: role.CfxUserLibrary = role.CfxUserLibrary( user_and_role_data_text_file_full_path="Input/role_data_next_ats.txt",   release_subsystem_mapping=release_role_mapping.next_atsp_release_subsystem_mapping)
        user = cfx_users_library.get_cfx_user_by_full_name("Zehoub Khaled")
        assert user.subsystem == role.SubSystem.ATS
